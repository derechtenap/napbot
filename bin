client.once('ready', () => {
    console.log('\n' + client.user.tag + ' wurde geladen! napbot ist bereit\nDer Bot ist mit diesen Servern verbunden: ');
    client.guilds.forEach((guild) => {
        console.log('- ' + guild.name)
    })

    client.user.setActivity('Wieder da!', {
        type: 'WATCHING'
    })
});

// message.channel.send('**Statistiken von ' + stat.name + ' (Rangliste: RM)**\nClan: ' + 
// checkClan(stat.clan) + '\nRang: ' + stat.rank + ' von ' + resObj.total + 
// ' Spielern (Top: ' + ladderProzent(platzProzent) + '%)\nELO: ' + stat.rating + 
// ' (Rekord: ' + stat.highest_rating + ')\nAktuelle Streak: ' + stat.streak + '\nSpiele: ' + 
// stat.games + ' (Siege: ' + stat.wins + ' | Niederlagen: ' + stat.losses + ' | Drops: ' + 
// stat.drops + ')'  + '\nLetztes Spiel: ' + ermittleZeit(stat.last_match) + ' (' + stat.last_match + ')');

if (command === 'rm') {

        xhr.onload = function () {
            if (this.status === 200) {
                try {
                    const resObj = JSON.parse(this.responseText);
                    const stat = resObj.leaderboard[0];
                    var platzProzent = stat.rank / resObj.total;
                    var siegProzent = ((stat.wins / stat.games) * 100).toFixed(1) + '%';

                    const embedRM = new Discord.RichEmbed()
                        .setColor('#0099ff')
                        .setTitle(stat.name + ' - Clan: ' + checkClan(stat.clan)) // USERNAME
                        .setURL('')
                        .setAuthor('Statistken - Zufallskarten-Rangliste (RM)', steamIcon, '')
                        .setDescription('')
                        .setThumbnail(steamIcon)
                        .addField('ELO', stat.rating, true)
                        .addField('Spiele', stat.games, true)
                        .addField('Siege', stat.wins, true)
                        .addField('Niederlagen', stat.losses, true)
                        .addField('Drops', stat.drops, true)
                        .addField('Siege in %', siegProzent, true)
                        .addField('Aktuelle Streak', stat.streak, true)
                        .addField('HÃ¶chste ELO', stat.highest_rating, true)
                        .addBlankField()
                        .addField('Rang', stat.rank + '/' + resObj.total, true)
                        .addField('Letztes Spiel', ermittleZeit(stat.last_match), true)
                        .setTimestamp()
                        .setFooter('Statistken von aoe2.net', iconAoeNET);

                    message.channel.send(embedRM);

                } catch (e) {
                    console.warn('Fehler: ' + e);
                    message.channel.send(':warning: **Ups! Also irgendwas ist schiefgelaufen.**\n' +
                        'Wahrscheinlich gibt es den Spieler in dieser Rangliste nicht oder der Server hat' +
                        ' nicht geantwortet ...');
                }

            } else {
                console.warn('Keine Daten erhalten!');
            }

        };

        xhr.open('GET', urlAPI + args);
        console.log(urlAPI);
        xhr.send(null);

    }
